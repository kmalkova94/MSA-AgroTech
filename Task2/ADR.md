### <a name="_b7urdng99y53"></a>**Название задачи: MVP системы мониторинга скота** 
### <a name="_hjk0fkfyohdk"></a>**Автор: Малкова Ксения**
### <a name="_uanumrh8zrui"></a>**Дата: 28 октября 2025**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
| UC1 | Пользователь, датчики, камеры | Мониторинг в реальном времени | Пользователи наблюдают за агрегированными данными и показателями с датчиков и камер через Web App и Mobile App |
| UC2 | Пользователь, внешние устройства | Управление устройствами (кормушки, поилки, фильтры) | Пользователь настраивает внешние устройства кормления через Web App |
| UC3 | Пользователь | Настройка параметров мониторинга системы | Пользователь задает пороговые значения для показателей |
| UC4 | Пользователь | Получение оперативного уведомления об аномалиях | При повышении пороговых значений датчиков, Backend формирует уведомления |
| UC5 | Пользователь | Формирование аналитических отчетов | Пользователь через Web App просматривает отчеты системы мониторинга |
|||||
### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

|**№**|**Требование**|
| :-: | :- |
| NFR1 | Отказоустойчивость 99,95% |
| NFR2 | Расширяемость функционала без изменений существующего |
| NFR3 | Высокая производительность, оповещение о нештатной ситуации не более чем через 5 секунд после возникновения инцидента |
| NFR4 | Реагирование системы видеоаналитики в реальном времени (миллисекунды) |
| NFR5 | Камеры должны уметь снимать в темное время суток |
|||
### <a name="_qmphm5d6rvi3"></a>**Решение**
Диаграмма контейнеров С2 - С2.puml

Для сервисов Backend была выбрана технология Java/Spring, так как Spring Framework предоставляет решения для быстрой разработки микросервисов, в частности Spring Data, Spring Security и т.д.

Система мониторинга требует хранения разного вида данных, поэтому было выбрано три вида баз данных:
    - PostgreSQL - для хранения пользовательской информации, справочных данных о животдных, датчиках, системах кормления, так как данные структурированы и требуется транзакционная целостность данных.
    - Clickhouse - для хранения метрик из-за удобства аналитики и удобного горизонтального масштабирования.
    - S3 - объектное хранилище для хранения фото и видеофайлов.

В качестве очереди сообщений выбрана Apache Kafka, так как технология предоставляет высокую производительность, и на данном этапе не требуется сложная маршрутизация.

Для Web App был выбран TypeScript из-за большого выбора фреймворков с готовыми компонентами для дашбордов.

Для Mobile App выбраны Swift (для iOS), java (Android).

Для работы с датчиками - Python.
### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Альтернативная диаграмма контейнеров C2 - C2(alt).puml

В альтернативном решении поток данных передается в kafka, и после обрабатывается не в backend, а с помощью Kafka Streams и rule engine. Это позволяет мгновенно реагировать на события и выявлять аномалии поведения.

**Недостатки, ограничения, риски**
-Требуются знания в работе с Kafka.
-Сложность развертывания и мониторинга системы.

